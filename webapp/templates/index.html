<!doctype html>
<html lang="en">

  {% load staticfiles %}

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="JT van Dijk" content="">
    <link rel="icon" href="{% static 'favlogo.png' %}"/>

    <title>Urban Dynamics Lab - Names in Great Britain</title>

    <!--bootstrap css-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous"/>
    <!--leaflet css-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="anonymous"/>
    <!--mapbox fullscreen css-->
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css"/>
    <!--custom css-->
    <link href="{% static 'css/custom.css' %}" rel="stylesheet"/>

    <!--include navigation-->
    {% include "nav.html"%}

    <!-- csrf token -->
    {% csrf_token %}

  </head>

<body class="fixed-nav sticky-footer">

  {% block nav %}
  {% endblock %}

  <!--main content -->
  <div class="content-wrapper">
    <div class="container-fluid">

      <!--about section-->
      <div id="dashboard">
        <div class="card mb-3">
          <div class="card-header bg-dark text-light">
          <i class="fa fa-list-ul mr-3"></i>About
          <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseAbout" aria-expanded="true" aria-controls="collapseAbout">
            <span class="fa fa-align-justify" style="text-decoration: none"></span>
          </button>
          </div>
          <div id="collapseAbout" class="collapse show" aria-labelledby="collapseAbout">
            <div class="card-body p-2">
            <p class="card-text text-justify top">
            Welcome to the <strong>Great Britain Family Names</strong> website which presents selected findings of projects based at the University College London
            <a class="in-text-link" href="https://www.cdrc.ac.uk/">Consumer Data Research Centre</a> and <a class="in-text-link" href="https://www.ucl.ac.uk/urban-dynamics-lab">Urban Dynamics Lab</a>.
            Our research focuses upon the origins and spread of family bloodlines as manifest in the past and over more recent years. Our estimates of the spread of
            names over time are based upon <a href="https://www1.essex.ac.uk/history/research/icem/default.htm">Historic Census data</a> and much more recent
            <a href="https://www.cdrc.ac.uk/data-services/cdrcdata/">Consumer Registers</a>.
            </p>
          </div>
         </div>
        </div>

        <!--surname section-->
        <div>
          <div class="card-header bg-dark text-light mb-3">
          <i class="fas fa-globe mr-3"></i>Surname exploration
          <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseSur" aria-expanded="true" aria-controls="collapseSur">
            <span class="fa fa-align-justify" style="text-decoration: none"></span>
          </button>
          </div>

          <!--container -->
          <div id="collapseSur" class="row collapse show" aria-labelledby="collapseSur">
            <!--search section-->
            <div class="col-lg-4">
              <div class="card mb-3">
                <div class="card-header">
                  <i class= "fa fa-search mr-3"></i>Search for a surname
                  <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseSearch" aria-expanded="true" aria-controls="collapseSearch">
                    <span class="fa fa-align-justify" style="text-decoration: none"></span>
                  </button>
                </div>
                <div id="collapseSearch" class="collapse show" aria-labelledby="collapseSearch">
                  <div class="card-body p-2">
                    <p class="card-text text-justify top">
                      By entering a surname and subsequently using the slider bar on the map, you can see how family names have spread across Great Britain over the periods
                      between historic Censuses (shown in red) and more recent time periods (shown in blue).
                    </p>
                    <form method="post" id="searchSur">
                    <div class="input-group">
                      <input class="form-control" type="text" placeholder="Type a surname, e.g. Smith" name="q" id="surname" maxlength="50">
                      <span class="input-group-append">
                        <button class="btn btn-primary" type="submit">
                          <i class="fa fa-search"></i>
                        </button>
                      </span>
                    </div>
                    </form>
                    <p id="searchParam">
                    </p>
                    <p id="searchExtra">
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!--map section-->
            <div class="col-lg-8">
              <div class="card mb-3" >
                <div class="card-header">
                  <i class="fa fa-map mr-3"></i>Contour map
                  <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseMap" aria-expanded="true" aria-controls="collapseMap">
                    <span class="fa fa-align-justify" style="text-decoration: none"></span>
                  </button>
                </div>
                <div id="collapseMap" class="collapse show" aria-labelledby="collapseMap">
                  <div id="kdemap" class="card-body p-0">
                    <div id="mapload" class="loading" style="display:none">
                      <img src="{% static 'load.gif' %}" class="text-center" height="50" width="50"/>
                    </div>
                    <canvas id="cardMap" width="100" height="650">

                      <!--map-->

                    </canvas>
                  </div>
                  <div class="card-footer small text-muted p-2">Background map © OpenStreetMap contributors</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!--graph section-->

        <div>
          <div class="card-header bg-dark text-light mb-3">
          <i class="fas fa-signal mr-3"></i>Surname statistics
          <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseStat" aria-expanded="true" aria-controls="collapseStat">
            <span class="fa fa-align-justify" style="text-decoration: none"></span>
          </button>
          </div>

          <!--container-->
          <div id="collapseStat" class="row collapse show" aria-labelledby="collapseStat">
            <!--chart section -->
            <div class="col-lg-6">
              <div class="card mb-3">
                <div class="card-header">
                  <i class="fas fa-chart-line mr-3"></i>Frequency Historic Census
                  <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseFreqHr" aria-expanded="false" aria-controls="collapseFreqHr">
                    <span class="fa fa-align-justify" style="text-decoration: none"></span>
                  </button>
                </div>
                <div id="collapseFreqHr" class="collapse show" aria-labelledby="collapseFreqHr">
                  <div class="card-body p-2" id="cardFreqHr">

                    <!--historic chart-->
                    <script> var hr_freq = {{ hr_freq }} </script>

                  </div>
                </div>
              </div>
            </div>

            <div class="col-lg-6">
              <div class="card mb-3">
                <div class="card-header">
                  <i class="fas fa-chart-line mr-3"></i>Frequency Contemporary Registers
                  <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseFreqCr" aria-expanded="false" aria-controls="collapseFreqCr">
                    <span class="fa fa-align-justify" style="text-decoration: none"></span>
                  </button>
                </div>
                <div id="collapseFreqCr" class="collapse show" aria-labelledby="collapseFreqCr">
                  <div class="card-body p-2" id="cardFreqCr">

                    <!--contemporary chart -->
                    <script> var cr_freq = {{ cr_freq }} </script>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!--location section -->
        <div>
          <div class="card-header bg-dark text-light mb-3">
            <i class="fas fa-location-arrow mr-3"></i>Location exploration
            <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseLoc" aria-expanded="true" aria-controls="collapseLoc">
              <span class="fa fa-align-justify" style="text-decoration: none"></span>
            </button>
          </div>
          <!--containter -->
          <div id="collapseLoc" class="collapse show" aria-labelledby="collapseLoc">
            <div class="row">
              <!--location selection-->
              <div class="col-lg-4">
                <div class="card mb-3">
                  <div class="card-header">
                    <i class="fas fa-compass mr-3"></i>Location manager
                    <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseLocMan" aria-expanded="true" aria-controls="collapseLocMan">
                      <span class="fa fa-align-justify" style="text-decoration: none"></span>
                    </button>
                  </div>
                  <!--location selection-->
                  <div id="collapseLocMan" class="collapse show" aria-labelledby="collapseLocMan">
                    <div class="card-body p-2" id="locMan">
                    <p class="card-text text-justify top">
                    Select a location below to explore its surname statistics. Or simply select 'Use my location' to explore the surname statistics of your current location.
                    </p>
                    <form method="post" id="locUser">
                      <select class="form-control" id="selLoc">
                        <option disabled>Allow location services:</option>
                        <option value="user">Use my location</option>
                        <option disabled>Select a city:</option>
                        {% for d in agg_geo %}
                          <option>{{ d }}</option>
                          {% endfor %}
                      </select>
                      <p class="card-text text-center mt-3">
                      <button class="btn btn-primary btn-sm text-center" id='share-loc' type='submit'>Apply selection</button>
                      <img src="{% static 'load.gif' %}" id='loading-indicator' style='display:none' class="text-center" height="50" width="50"/>
                      </p>
                      <p id="noLoc">
                      </p>
                    </form>
                    </p>
                    </div>
                    <div class="card-footer small text-justify text-muted p-2">
                    Please note that these data are aggregated to LSOA-level for privacy reasons.
                    City data are aggregated further by selecting LSOA centroids that fall within a city's built up area.
                    </div>
                  </div>
                </div>
              </div>

              <!--frequency surnames-->
              <div class="col-lg-4">
                  <div class="card mb-3">
                  <div class="card-header">
                    <i class="fas fa-ellipsis-h mr-3"></i>Most frequent surnames
                    <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseNames" aria-expanded="false" aria-controls="collapseNames">
                      <span class="fa fa-align-justify" style="text-decoration: none"></span>
                    </button>
                  </div>
                  <!--frequency surnames-->
                  <div id="collapseNames" class="collapse show" aria-labelledby="collapseNames">
                    <div class="card-body p-2" id="locNames">
                    </div>
                  </div>
                </div>
              </div>

              <!--unique surnames -->
              <div class="col-lg-4">
                <div class="card mb-3">
                  <div class="card-header">
                    <i class="fas fa-fingerprint mr-3"></i>Unique surnames
                    <button class="btn btn-light p-0 float-right" data-toggle="collapse show" data-target="#collapseUniq" aria-expanded="false" aria-controls="collapseUniq">
                      <span class="fa fa-align-justify" style="text-decoration: none"></span>
                    </button>
                  </div>
                  <!--unique surnames-->
                  <div id="collapseUniq" class="collapse show" aria-labelledby="collapseUniq">
                    <div class="card-body p-2" id="locUniq">
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!--container -->
            <div class="row">
              <!--surname diversity-->
              <div class="col-lg-4">
                <div class="card mb-3">
                  <div class="card-header">
                    <i class="fa fa-chart-pie mr-3"></i>Surname diversity
                    <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseAlpha" aria-expanded="false" aria-controls="collapseAlpha">
                      <span class="fa fa-align-justify" style="text-decoration: none"></span>
                    </button>
                  </div>
                  <!--surname diversity-->
                  <div id="collapseAlpha" class="collapse show" aria-labelledby="collapseAlpha">
                    <div class="card-body p-2" id="locAlpha">
                    </div>
                  </div>
                </div>
              </div>

              <!--topname -->
              <div class="col-lg-4">
                <div class="card mb-3">
                  <div class="card-header">
                  <i class= "fa fa-map-marker mr-3"></i>Topname
                  <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseTop" aria-expanded="true" aria-controls="collapseTop">
                    <span class="fa fa-align-justify" style="text-decoration: none"></span>
                  </button>
                </div>
                <!--topname-->
                  <div id="collapseTop" class="collapse show" aria-labelledby="collapseTop">
                    <div class="card-body p-2" id="locTop">
                    </div>
                  </div>
                </div>
              </div>

              <!--feedback-->
              <div class="col-lg-4">
                <div class="card mb-3">
                  <div class="card-header">
                    <i class="fa fa-comments mr-3"></i>Feedback
                    <button class="btn btn-light p-0 float-right" data-toggle="collapse" data-target="#collapseFeedback" aria-expanded="false" aria-controls="collapseFeedback">
                      <span class="fa fa-align-justify" style="text-decoration: none"></span>
                    </button>
                  </div>
                  <div id="collapseFeedback" class="collapse show" area-labelledby="collapseFeedback">
                    <div class="card-body p-2">
                        <p class="card-text text-justify top">
                        If you have any questions, concerns or feedback, please do not hesitate to contact us:<br/>
                        </p>
                        <p class="card-text text-center ml-0">
                        <a hr_freqef="mailto:j.t.vandijk@ucl.ac.uk" class="text-dark"> <i class="fa fa-envelope fa-2x float-center"></i></a>
                        &nbsp;&nbsp;
                        <a href="https://twitter.com/@urbndynamicslab" class="text-dark"> <i class="fab fa-twitter fa-2x"></i></a>
                        </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!--logo-->
      <div class="row">
        <div class="col-lg-12 text-center p-3">
          <a href="https://www.ucl.ac.uk/urban-dynamics-lab">
          <img src="{% static 'udl_logo.png' %}" height="60" />
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- /.container-fluid-->
  <!-- /.content-wrapper-->
  <footer class="sticky-footer">
    <div class="container">
      <div class="text-center">
        <small>Copyright © Urban Dynamics Lab {% now "Y" %} </small>
      </div>
    </div>
  </footer>

  <!--charts js-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
  <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>

  <!--leaflet slider js-->
  <script type="text/javascript" src="https://cdn.rawgit.com/nezasa/iso8601-js-period/master/iso8601.min.js"></script>

  <!--mapbox fullscreen js -->
  <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>

  <!--custom js-->
  <script> var ireland_gjson ="{% static 'js/ireland.geojson' %}";</script>
  <script src="{% static 'js/main.js' %}"></script>
  <script src="{% static 'js/modal.js' %}"></script>
  <script src="{% static 'js/map.js' %}"></script>
  <script src="{% static 'js/chart.js' %}"></script>
  <script src="{% static 'js/search.js' %}"></script>
  <script src="{% static 'js/search_render.js' %}"></script>
  <script src="{% static 'js/location.js' %}"></script>
  <script src="{% static 'js/location_render.js' %}"></script>
  <script src="{% static 'js/timedimension.js' %}"></script>
  <script src="{% static 'js/slider.js' %}"></script>

  <!-- bootstrap cs-->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

</body>
</html>
